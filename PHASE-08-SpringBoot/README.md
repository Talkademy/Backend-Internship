<div dir="rtl" align="justify">

فاز هشت: Spring Boot
=====

در فاز هفتم با [Spring Boot](https://en.wikipedia.org/wiki/Spring_Framework) که یک چارچوب (Framework) تحت جاوا است آشنا می‌شوید.
1. مقدمه
   
   Spring Boot یک چارچوب است که می‌تواند در روند توسعه‌ی برنامه‌نویسی بک‌اند کمک بسیاری می‌کند که می‌توان به تسهیل کار با پایگاه‌های داده، دریافت و ارسال پیام در معماری REST و کاهش زمان دیپلوی (deploy) اشاره کرد. در بخش‌های دو و سه با اجزای آن بهتر آشنا خواهیم شد.

2. IoC
   
   وارونگی کنترل یا Inversion of control  اصلی است که در چارچوب‌های نرم‌افزاری حضور دارد. از این مفهوم به صورت کنترل اشیاء و ماژول‌های برنامه از طریق یک container یاد می‌شود. به صورت معمول، کنترل کتابخانه‌ها از طریق کد نوشته شده توسط ما انجام می‌شود ولی در IoC یک چارچوب ثانویه‌ای کنترل برنامه را در دست میگیرد.  برای مثال در Spring Boot، واسط `ApplicationContext` همان IoC container است. مسئولیت مقداردهی اولی، پیکربندی و اسمبل کردن اشیاء را بر عهده دارد. 
3. Dependency Injection

   تزریق وابستگی یا Dependency Injection یک الگوی پیاده‌سازی IoC است. به این صورت که اسمبلر به جای خود اشیاء مسئولیت دخیل کردن شیئی به شیء دیگر را برعهده می‌گیرد. مهمترین مزیت این ویژگی این است که نیازی به ذکر پیاده‌سازی شیء اول در دومی نیست. مثال زیر را در نظر بگیرید:

   <div dir='ltr'>
   
   ```java

   public class Store {
    private Item item;
 
    public Store() {
        item = new ItemImpl1();    
    }
   }

   ```

   </div>
   اکنون اگر بخواهیم از الگوی تزریق وابستگی استفاده کنیم خواهیم داشت: 
   
   <div dir='ltr'>
   
   ```java

   public class Store {
    private Item item;
    public Store(Item item) {
        this.item = item;
    }
   }

   ```

   </div>

   در Spring Boot روش‌های متعددی برای انجام این الگو وجود دارد. [این لینک](https://www.baeldung.com/inversion-control-and-dependency-injection-in-spring) می‌تواند در آشنایی با این شیوه‌ها راهگشا باشد.

4. Component
   
   اگر به‌خاطر داشته باشید، در فاز پنجم با برخی از الگوهای طراحی از جمله `Singleton` آشنا شدید. برخی اشیاء در Spring Boot می‌بایست به صورت `Singleton` طراحی شوند زیرا تنها و تنها به یک عدد از آن‌ها در کل برنامه نیاز است که آن‌ها را به صورت اجمالی می‌توانیم اینگونه لیست کنیم:
   - Controller / RestController : برای مدیریت درخواست‌های دریافتی به سمت وب‌سرویس استفاده می‌شود. شما یک نگاشت (Mapping) برای هر درخواست درنظر می‌گیرید و خود کنترلر هنگام دریافت درخواست با تابع مناسب آن‌ها را تطبیق می دهد.
   - Service : کلاسی است که منطق برنامه را پشتیبانی می‌کند. برای مثال درخواستی به کنترلر می‌آید و سپس کنترلر آن را به یک سرویس پاس می‌دهد و پس از مدیریت درخواست پاسخ به کنترلر بازمی‌گردد و کنترلر آن را به کاربر خروجی می‌دهد. 
   - Repository : یک واسط برای ارتباط با پایگاه داده است. به این صورت که شما با تنظیمات ثبت شده در `application.properties` عملا پارامترهای مورد نیاز اتصال به پایگاه داده را تعیین کردید و با کمک `Repository` روی آن کوئری می‌زنید. به عبارتی زحمت نوشتن با رشته یا `Criteria` از دوش شما برداشته می‌شود. این Component تنها و تنها با `Service` در ارتباط است. در صورتی که این توالی را به درستی درک نکرده‌اید نگران نباشید! در مورد لایه‌های تجرید در فازهای آینده بیشتر آشنا خواهید شد.
   همچنین `Repository`ها برای ذخیره‌ی `Entity`ها به کار می‌روند که در حقیقت اشیاء حقیقی برنامه هستند. مانند `دانشجو` یا `استاد` در سامانه‌ی دانشگاهی. برای درک بیشتر مفهوم نها (Entity) می‌توانید از[این لینک](https://www.baeldung.com/jpa-entities) کمک بگیرید.
   - Configuration : به صورت سنتی از کلاس `Properties` در جاوا می‌توان برای خواندن پرونده‌های پیکربندی - یعنی اساسا هر پرونده با محتوای کلید:مقدار - بهره برد. اما در Spring Boot شما می‌توانید یک کلاس `Configuration` داشته باشید و با نام آن‌ها مقادیرشان را در لوای فیلد‌های جاوایی ثبت کنید. به عبارتی این کلاس مشابه یک `public static class Constants` است که شما در برنامه‌یتان از ثوابت آن استفاده می‌کنید.

5. DTO 

   DTO یا Data Transfer Object اشیایی هستند که برای دریافت و ارسال اطلاعات بین لایه‌های برنامه استفاده می‌شوند. درمورد دلیل استفاده آن‌ها و نحوه پیاده‌سازی آن‌ها می‌توانید از لینک‌های زیر کمک بگیرید:
   - [What is the use of DTO instead of Entity?](https://softwareengineering.stackexchange.com/questions/373284/what-is-the-use-of-dto-instead-of-entity)
   - [Entity To DTO Conversion for a Spring REST API](https://www.baeldung.com/entity-to-and-from-dto-for-a-java-spring-application)
   
6. REST
   
   از آنجایی که Spring Boot جهت طراحی وب‌سرویس‌ها استفاده می‌شود می‌بایست برنامه‌ی خود را دست کم با کی معماری وفق دهیم. REST یکی از چندین معماری موجود است. می‌توانیم ویژگی‌های REST را به صورت زیر خلاصه کنیم:
   - stateless : هر درخواست شما، مستقل از درخواست‌های پیشین شما بررسی می‌شود.
   - Server/Client : وقتی شما در یک سایت دانلود دنبال برنامه‌ی به‌خصوصی هستید، آن سایت سرور و شما کلاینت خواهید بود. و مرکزیتی سمت آن سایت وجود دارد. معماری REST به این صورت است که شما برنامه‌ی خود را روی یک یا چند سرور دیپلوی می‌کنید و باقی جهان به صورت کلاینت به سرور(ها) شما متصل می‌شوند. یعنی شما (توسعه‌دهنده‌ی بک‌اند) کد خود رو بر روی تعداد سرور قرار می‌دهید، و کاربران تنها درخواست‌های خود را به شما ارسال می‌کنند. عملا هیچ‌یک از پردازش‌های شما در سمت کاربر انجام نمی‌شود.
   - Path : همانطور که هنگام گشت درون یک ساختار پوشه‌بندی شما با زیرپوشه‌ها (Subdirectory) سروکار دارید، در معماری REST هم می‌توانید چنین کاری کنید. برای مثال فرض کنید شما یک بایگانی تحت وب پیاده‌سازی کرده‌اید که درمورد کتاب‌ها و مقالات دانشگاهی اطلاعات فراوانی دارد. اولین مسیر شما تعیین می‌کند که درخواست به `api.my_archive.com/book` برود یا `api.my_archive.com/paper`. سپس مممکن است هر کدام از این‌ها به زیرمسیرهای دیگری بروند.
   - HTTP Verb : در معماری REST می‌توانید از دستورات `GET`, `POST`, `PUT` و `DELETE` درخواست‌های خود را ارسال کنید. که تعیین کننده‌ی آن هاستند که شما تمایل دارید چه عملیاتی از سمت سرور انجام شود.
   - Body : بدنه‌ی درخواست شما که اغلب به صورت `JSON` یا `XML` است.
   - Header & Query Parameter (Inline variable) : شما می‌توانید برخی پارامترهای جنبی را به صورت سرآیند یا متغیر پرسمانی ارسال کنید.
   
نهایتا شما می‌توانید از لینک‌های زیر جهت آموزش، تفهیم و مثال بهره ببرید
* [Spring tutorial](https://www.tutorialspoint.com/spring_boot/index.htm) - دوازده فصل اول
* [Spring components](https://medium.com/technology-hits/spring-boot-framework-and-its-components-2725cecf0e62)
* [What is REST](https://www.codecademy.com/articles/what-is-rest)
* [Spring sample project](https://spring.io/guides/gs/rest-service/)

در صورتی که تمایل دارید با قابلیت‌های بیشتر Spring Boot آشنا شوید پیشنهاد می‌شود باقی فصول لینک اول را مطالعه کنید (بعضا در کنار فازهای پیش رو).
همچنین کتاب [Spring in action](https://doc.lagout.org/programmation/Spring%20Boot%20in%20Action.pdf) می‌تواند به شما درک عمیق‌تر در این زمینه دهد.
 
وظایف شما
=========
1. پرسش‌های نظری

   مثال بایگانی را در نظر بگیرید. فرض کنید در فاز یک این پروژه، قرار است برای مقاله و کتاب دو درخواست تعریف کنیم. یک، جستجو با کمک نام؛ دو، دریافت (یا امانت).
   1. به نظر شما از نظر معنایی این سامانه چند کنترلر و چند سرویس نیاز دارد؟ نام‌گذاری شما چگونه است؟
   2. به نظر شما نگاشت درخواست‌ها بهتر است ابتدا بر اساس نوع نوشته باشد یا نوع درخواست؟
   3. اگر بدانید در فازهای بعدی احتمالا انواع دیگری از نوشته ممکن است در این سامانه قرار گیرد و یا درخواست‌های متنوع‌تری اعمال شوند، طراحی خود در سوال قبل را تغییر می‌دهید؟
   4. به نظر شما استفاده از `@Configuration` چه مزیتی نسبت به یک کلاس استاتیک ثوابت دارد؟
2. [پروژه‌ی عملی](Project.md)
</div>