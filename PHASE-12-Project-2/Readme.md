<div dir="rtl" align="Justify">

فاز ۱۲ - پروژه‌ی نهایی
=====================

در این فاز، قصد داریم تا شما را با شیوه‌ی استفاده از الاستیک و کافکا در جاوا آشنا کنیم. همچنین به توانمندی‌ها و مزایای این ابزارها (در قیاس با `MySQL` و یا سرویس‌های تک‌گرهی(`Single node`)) بهتر پی‌ببرید.

پروژه‌ی شما آماده‌سازی یک موتور جستجو برای StackOverFlow است. به شما پست‌ها، کاربران، نظرات و... این وب‌سایت کارآمد! که مربوط به سالیان گذشته است داده می‌شود و شما باید `api`های زیر را  طراحی کنید.

<div dir="ltr" >

* `POST - http://api_d/posts`
  ```json
  Request: {
      "kw": "String - keywords (in Text, title)",
      "from_date": "Date",
      "t_names": ["String - tag names"],
      "min_score": "Integer",
      "cnt_in_page": "Integer",
      "page_no": "Integer"
  }
  Response: {
      "posts_list": [
          {
              "orig_post_id": "Integer",
              "orig_post_title": "String",
              "orig_post_body": "String",
              "orig_post_score": "Integer",
              "orig_post_comments": [
                  {
                    "u_name": "String",
                    "body": "String"
                  }
              ],
              "best_ans_id": "Integer",
              "best_ans_body": "String",
              "best_ans_score": "Integer"
          }
      ]
  }
  ```
* `GET - http://api_d/tags/all`
  ```json
  Request: {}
  Response: {
      "t_id": "Integer",
      "t_name": "String",
      "t_cnt": "Integer"
  }
  ```

</div>

  `api_d` نشانی `api` شماست.

گام ۰ - داده‌های مورد نیاز
=========================

برای شروع کار بهتر است از این [لینک](https://archive.org/download/stackexchange/softwareengineering.stackexchange.com.7z) داده‌های مربوط را دریافت نمایید. توجه داشته باشید که حجم این موارد پس از غیرفشرده‌سازی حدود ۲ گیگ خواهد بود.

گام ۱ - فاز ۹!
==============

ابتدا به دوران پیش از الاستیک برگردید. فرض کنید تنها پایگاه داده‌ای که می‌شناسید همان `MySQL` است. سعی کنید تنها با کمک آن موارد بالا را پیاده‌سازی کنید. در پروژه‌های از این قبیل، معمولا فرآیندی به عنوان پیش‌پردازش وجود دارد که بخشی از داده‌ها را شروع به وارد کردن می‌کند و سپس `api` را آماده می‌کند. جهت درک احساس نیاز به ابزارهای جدیدی که یاد گرفته‌اید، به پرسش‌های زیر پاسخ دهید
* فرآیند پیش‌پردازش چه مقدار زمان می‌برد؟
* هر درخواست جستجو به طور متوسط چه مقدار معطل می‌شود تا پاسخ بگیرد (به تفکیک بیان کنید)

گام ۲ - مقدمات الاستیک و کافکا و آشنایی با ابزارهای مربوطه در جاوا
=================================================================

اکنون نوبت آن است که `Kibana` و `Zookeeper` خود را بالا بیاورید که بتوانید با الاستیک و کافکا کار کنید.

برای کار با الاستیک و کافکا در جاوا می‌توانید از این دو کمک بگیرید:
* [Elasticsearch in Spring Boot](https://www.baeldung.com/spring-data-elasticsearch-tutorial)
* [KafkaTemplate in Spring Boot](https://www.baeldung.com/spring-kafka)

پیشنهاد می‌شود که جهت تثبیت، برای خود پروژه‌های ساده‌ای بسازید و با این دو کار کنید. از ابزارهای gui موجود هم جهت درک بهتر استفاده کنید.

گام ۳ - پیش به سوی مقیاس پذیری
==============================

در این بخش از شما می‌خواهیم تا کد فاز ۱ خود را مقیاس‌پذیر کنید. به این منظور شما می‌بایست یک `producer` ایجاد کنید تا از `xml` بخواند و در کافکا بنویسد. سپس ۳ نسخه `consumer` راه بیندازید که هر کدام از کافکا می‌خوانند، در `MySQL` ثبت می‌کنند و همچنین درخواست‌ها را پردازش می‌کنند. 
اکنون مجددا زمان پیش پردازش را بررسی کنید. آیا تغییری رخ داده‌است؟ همچنین در نوبت دیگر ۲ تا از سرویس‌دهنده‌هایتان را خاموش کنید. ایا حالتی که یک `consumer` وجود دارد مشابه وضعیت گام ۱ است؟

گام ۴ - مقابله با خیل عظیم
==========================

اکنون می‌خواهیم الاستیک را در انتهای مسیر تبدیل `xml` به رکورد `MySQL` قرار دهیم. بدین صورت که `consumer` ها علاوه بر `MySQL` در الاستیک هم داده‌ها را ثبت می‌کنند و همچنین جستجو را صرفا از الاستیک انجام می‌دهند.
سوالات گام ۱ را مجددا بررسی کنید و پاسخ خود را بنویسید.


</div>