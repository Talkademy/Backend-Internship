<div dir='rtl'>
<font face='XB Zar'>

<center>

# پروژهٔ یکم کارآموزی
# فاز ۲
## بهار ۱۴۰۰

</center>

<font size=4>

در فاز پیشین یک وب‌سرویس ابتدایی برای مدیریت یک سامانهٔ درخواست خودرو پیاده‌سازی کردید که در آن با ابزارهای زیر آشنا شدید
* Spring boot
* Junit
در این فاز، علاوه بر ابزارهای پیشین می‌بایست از موارد زیر هم استفاده کنید
* Mockito
* Redis
* Sl4j

همچنین با توجه به توضیحاتی که در ادامهٔ مستند خواهد آمد ممکن است به Multi-threading هم نیاز پیدا کنید.
</font>

#### خواسته‌های فنی

<font size=4>

همان‌طور که پیشتر گفته شده بود، در این پروژه ۳ وظیفه بر عهدهٔ شما بود
* ثبت‌نام راننده
* ثبت‌نام مسافر
* درخواست راننده

لکن سه ایراد در این فرم وجود داشت
* سناریویی برای آزادسازی راننده وجود نداشت
* اطلاعات پس از پایین آمدن سیستم از بین می‌رفت
* درصورت نبود راننده روال مناسبی اتخاذ نمی‌شد

جهت پیاده‌سازی این موارد یاد شده، می‌بایست در کد خود با کمک ابزارهای گفته شده تغییراتی ایجاد کنید که از طریق درخواست‌های زیر موارد بالا را مدیریت کند.

</font>

#### درخواست‌ها و پاسخ‌ها

##### درخواست خودرو

<div dir='ltr'>


##### Request

```json
GET /customer/order
** Query **
customer_id:<customer_id>
```

##### Response

```json
200 OK
{
    "driverId": <driverId>,
    "orderId":  <orderId>
}
```

</div>

در صورت در دسترس نبودن راننده (در سرور گیرنده‌ٔ درخواست) ابتدا می‌بایست از سرورهای دیگر نیز سوال کند (از طریق درخواست‌های با معماری REST). پس نتیجتا چند دقیقه می‌بایست کلاینت معطل شود تا جواب مناسب بگیرد.

درصورت که راننده‌ای آزاد نبود، پاسخ زیر ارسال شود:

<div dir='ltr'>

##### Response

```json
404 NOT FOUND
```

</div>

##### اتمام سفر

<div dir='ltr'>


##### Request

```json
GET /driver/done
** Query **
order_id:<order_id>
```

##### Response

```json
200 OK
```

</div>

درصورتی که سفری با این شناسه وجود نداشت پاسخ زیر ارسال شود:

<div dir='ltr'>

##### Response

```json
404 NOT FOUND
```

</div>

</font>

</div>